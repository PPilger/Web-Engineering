<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="de" xml:lang="de" 
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets">
    <body>
        <ui:composition template="main.xhtml">
            <ui:define name="title">
                <title>#{msg.registerTitle}</title>
            </ui:define>
            <ui:define name="navigation">
                <h:form id="navForm">
                    <ul>
                        <li><h:link id="backToLogin" outcome="index.xhtml" tabindex="1">#{msg.registerLogin}</h:link></li>
                    </ul>
                </h:form>
            </ui:define>
            <ui:define name="content">
                <div id="content">
                    <h2>#{msg.registerSubTitle}</h2>
                    <p>#{msg.registerBody}</p>

                    <h:form id="form">
                        <h3>#{msg.registerPersDat}</h3>

                        <h:panelGrid id="gridUserData" columns="3">
                            <h:outputLabel value="#{msg.registerSurname}" for="firstname" class="registerform"/>
                            <h:inputText id="firstname" value="#{userBean.user.firstname}">
                                <f:validator validatorId="nameValidator" />
                            </h:inputText>
                            <h:message id="firstname_messages" for="firstname"/>

                            <h:outputLabel value="#{msg.registerLastname}" for="lastname" />
                            <h:inputText id="lastname" value="#{userBean.user.lastname}" >
                                <f:validator validatorId="nameValidator" />
                            </h:inputText>
                            <h:message id="lastname_messages" for="lastname"/>

                            <h:outputLabel value="#{msg.registerBirthdate}" for="birthday" class="registerform"/>
                            <h:inputText id="birthday" value="#{userBean.user.birthdate}" />
                            <h:message id="birthday_messages" for="birthday"/>

                            <h:outputLabel value="#{msg.registerSex}" for="sex" class="registerform" />
                            <h:selectOneMenu id="sex" value="#{userBean.user.sex}">
                                <f:selectItem itemValue="f" itemLabel="#{msg.registerSexFem}" />
                                <f:selectItem itemValue="m" itemLabel="#{msg.registerSexMan}" />
                            </h:selectOneMenu>
                            <h:message id="sex_messages" for="sex"/>
                        </h:panelGrid>

                        <h3>#{msg.registerLoginData}</h3>

                        <h:panelGrid id="gridLoginData" columns="3">
                            <h:outputLabel for="username" class="registerform" value="#{msg.registerUser}" />
                            <h:inputText id="username" value="#{userBean.user.username}">
                                <f:validator validatorId="nameValidator" />
                            </h:inputText>
                            <h:message id="username_messages" for="username"/>

                            <h:outputLabel for="password" class="registerform" value="#{msg.registerPw}" />
                            <h:inputSecret redisplay="false" id="password" value="#{userBean.user.password}">
                                <f:validator validatorId="passwordValidator" />
                            </h:inputSecret>
                            <h:message id="password_messages" for="password"/>
                        </h:panelGrid>

                        <h:selectBooleanCheckbox id="showterms" immediate="true">
                            <f:ajax render="termsText" />
                        </h:selectBooleanCheckbox>
                        <h:outputText id="termsText" value="#{msg.registerShowTerms}" />

                        <p>
                            <h:commandButton id="submit" value="#{msg.register}" action="#{applicationBean.save(userBean.user)}">
                                <f:ajax render="successMessage" />
                            </h:commandButton>
                        </p>
                        
                        <p>
                            <h:outputText id="successMessage" value="success" rendered="#{userBean.user.registered}"/>
                        </p>
                    </h:form>
                </div>
            </ui:define>
        </ui:composition>
    </body>
</html>